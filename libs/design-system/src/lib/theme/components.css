@custom-variant position-sidebar {
  &:where([data-position='sidebar'] *) {
    @slot;
  }
}

@layer components {
  .passage {
    @apply font-serif leading-7;

    @variant position-sidebar {
      @apply leading-5 text-sm;
    }
  }

  .labeled {
    @apply font-sans font-semibold text-brick leading-7 text-sm;
  }

  .section-title,
  .body-title-main,
  .body-title-honorific {
    font-variation-settings:
      'wdth' 120,
      'opsz' 144,
      'GRAD' -50;
  }

  .paragraph {
    @apply mb-1 mt-2;

    @variant position-sidebar {
      @apply pt-1;
    }
  }

  .glossary-instance {
    @apply text-primary hover:text-brick underline decoration-brick decoration-dotted underline-offset-[3px] transition-colors cursor-pointer;
  }

  .end-note-link {
    @apply text-brick cursor-pointer text-xs;
  }

  .end-note-link ~ .end-note-link {
    @apply ml-0.75;
  }

  .glossary-instance-definition {
    p {
      @apply mb-1 mt-2;

      @variant position-sidebar {
        @apply pt-1;
      }
    }
  }

  [rend='small-caps'],
  .small-caps {
    font-variant-caps: small-caps;
  }

  .long-term {
    @apply break-all;
  }

  [xml\:lang]:not(
      [xml\:lang='en'],
      [xml\:lang='bo'],
      [xml\:lang='ja'],
      [xml\:lang='zh']
    ) {
    @apply italic;
  }

  emph,
  distinct,
  .text-sa {
    @apply italic;
  }
}
